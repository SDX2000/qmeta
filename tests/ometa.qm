//Every QMeta parser implicitly derives from QMetaParserBase
qmeta QMetaParser {
  grammar           = (rule ";")*;
  rule              = identifier "=" choices;
  choices           = choice "|" choices
                    | choice;
  choice            = term* ( "->" hostExpr)?;
  hostExpr          = "{" .* "}";
  term              = term1 ":" identifier
                    | term1;
  term1             = "~"  term2
                    | "?" hostExpr
                    | term2 "*"
                    | term2 "+"
                    | term2 "?"
                    | term2;
  term2             = '\''  (~'\'' escapedChar) '\''
                    | someToken
                    | identifier
                    | "(" choice ")";
  someToken         = spaces? '"' (~'"'  escapedChar)* '"' spaces?
  escapedChar       = '\\' char
                    | char;
}
