qmeta QMetaQVariantTransformer {
    grammar         = ["GRAMMAR", string:className, rule+:rs]
                    -> {
                            vars["gaurd"] = getGaurdName(className);
                            vars["ruleEnums"] = getRuleEnums(rs);
                            vars["ruleProtos"] = getRuleProtos(rs);
                            xform(out, "grammar", vars);
                       };

    rule            = ["RULE", string:n, expr:e]                    -> {xform(out, "rule", vars)};

    expr            = compoundExpr
                    | ruleApp
                    | notExpr
                    | loopExpr
                    | optionalExpr
                    | varDef
                    | hostExpr;

    compoundExpr    = [("OR"|"AND"):op, expr+:es]                   -> {xform(out, "compoundExpr", vars)};

    notExpr         = ["NOT", expr:e]                               -> {xform(out, "notExpr", vars)};

    loopExpr        = [("ZERO_OR_MORE"|"ONE_OR_MORE"):op, expr:e]   -> {xform(out, "loopExpr", vars)};

    optionalExpr    = ["OPTIONAL", expr:e]                          -> {xform(out, "optionalExpr", vars)};

    varDef          = ["DEFINE", string:n, expr:e]                  -> {xform(out, "varDef", vars)};

    hostExpr        = ["HOST_EXPR", expr:e, string:hexp]            -> {xform(out, "hostExpr", vars)};

    ruleApp         = ["APPLY", string]                             -> {xform(out, "ruleApp", vars)};
}
