//Every QMeta parser implicitly derives from QMetaParserBase
qmeta QMetaParser {
  grammar           = (rule ";")*;
  rule              = identifier "=" choices;
  choices           = choice "|" choices
                    | choice;
  choice            = term* ( "->" hostExpr)?;
  hostExpr          = "{" .* "}";
  term              = term1 "?" hostExpr
                    | term1;
  term1             = term2 ":" identifier
                    | term2;
  term2             = "~"  term3
                    | term3 "*"
                    | term3 "+"
                    | term3 "?"
                    | term3;
  term4             = '\''  (~'\'' escapedChar) '\''
                    | someToken
                    | identifier
                    | "(" choice ")";
  someToken         = spaces? '"' (~'"'  escapedChar)* '"' spaces?
  escapedChar       = '\\' char
                    | char;
}
